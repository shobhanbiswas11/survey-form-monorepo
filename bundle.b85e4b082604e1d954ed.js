(()=>{"use strict";var e,t={7123:(e,t,n)=>{var r=n(4637),i=n(9803),o=n.n(i),a=n(576);function c(e){return e.filter(Boolean)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};const u=function(e){var t=e.children,n=e.className,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["children","className"]);return(0,r.jsx)("button",s({className:o()(["bg-primary-main text-white px-6 py-2 text-xl rounded-lg","active:bg-primary-dark","transition-colors",n])},i,{children:t}))};var l=n(6935),d=n(8030),f=n(9800),p={logout:(0,f.PH)("LOGOUT"),appLoad:(0,f.PH)("APP_LOAD")},h=(0,f.e)(),v=h.startListening,y=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},x=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},m=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},g="questions";function b(){return localStorage.getItem(g)||localStorage.setItem(g,JSON.stringify([])),JSON.parse(localStorage.getItem(g))}function j(e){localStorage.setItem(g,JSON.stringify(e))}var w,O,N={add:function(e){return y(this,void 0,void 0,(function(){return x(this,(function(t){return j(m(m([],b(),!0),[e],!1)),[2]}))}))},update:function(e){return y(this,void 0,void 0,(function(){var t,n;return x(this,(function(r){return(t=Q.selectEntities(window._store.getState())[e])?((n=b().filter((function(t){return t.id!==e}))).push(t),j(n),[2]):[2]}))}))},remove:function(e){return y(this,void 0,void 0,(function(){return x(this,(function(t){return j(b().filter((function(t){return t.id!==e}))),[2]}))}))},getAll:function(){return y(this,void 0,void 0,(function(){return x(this,(function(e){return[2,b()]}))}))},removeMany:function(e){return y(this,void 0,void 0,(function(){return x(this,(function(t){return j(b().filter((function(t){return!e.includes(t.id)}))),[2]}))}))}},C=n(2699),I=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},k=new(function(){function e(){this.queue=[],this.updaterIdle=!0}return e.prototype.addChanges=function(e){var t=I(I([],e,!0),this.queue,!0);this.queue=(0,C.uniq)(t),this.intervalRef||this.startTimer()},e.prototype.startTimer=function(){var e=this;this.intervalRef=setInterval((function(){e.updaterIdle&&e.syncChanges()}),3e3)},e.prototype.stopTimer=function(){this.intervalRef&&(clearInterval(this.intervalRef),this.intervalRef=null)},e.prototype.syncChanges=function(){var e=this,t=(0,C.takeRight)(this.queue,5);this.queue=(0,C.dropRight)(this.queue,5),this.updaterIdle=!1;var n=[];(0,C.eachRight)(t,(function(e){n.push(N.update(e))})),Promise.allSettled(n).then((function(){e.updaterIdle=!0})),0===this.queue.length&&this.stopTimer()},e}()),P=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},M=(0,f.HF)(),T=(0,f.oM)({name:"question",initialState:M.getInitialState(),reducers:{addOne:M.addOne,updateOne:M.updateOne,updateMany:M.updateMany,deleteMany:M.removeMany,setAll:M.setAll}}),E=T.reducer,Q=M.getSelectors((function(e){return e.entities.questions})),A=T.actions;v({actionCreator:p.appLoad,effect:function(e,t){N.getAll().then((function(e){t.dispatch(A.setAll(e))}))}}),v({actionCreator:A.updateMany,effect:function(e){k.addChanges(e.payload.map((function(e){return e.id.toString()})))}}),v({actionCreator:A.addOne,effect:function(e){return P(void 0,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,N.add(e.payload)];case 1:return t.sent(),[2]}}))}))}}),v({actionCreator:A.deleteMany,effect:function(e){return P(void 0,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,N.removeMany(e.payload.map((function(e){return e.toString()})))];case 1:return t.sent(),[2]}}))}))}}),v({actionCreator:A.updateOne,effect:function(e){return P(void 0,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,N.update(e.payload.id.toString())];case 1:return t.sent(),[2]}}))}))}}),(O=w||(w={})).MCQuestion="MCQuestion",O.TextInputQuestion="TextInputQuestion";var _,q=n(1257),F=function(){return(0,q.I0)()},H=q.v9,L=n(6846),R=n(9496),Z=n(2973),V=n(4805),B=n(6786),D=n(7928),U=n(3688),G=n(4937),J=function(){return J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},J.apply(this,arguments)},W=function(e){var t=e.children,n=e.id,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["children","id"]);return(0,r.jsx)(U.rU,J({to:"details/".concat(n)},i,{children:t}))},z=[],Y=function(){function e(e,t){if(this.key=e,this.initialState=t,z.includes(this.key))throw new Error("Key already exist")}return e.prototype.create=function(){localStorage.setItem(this.key,JSON.stringify(this.initialState))},e.prototype.getRaw=function(){return localStorage.getItem(this.key)},e.prototype.get=function(){return this.getRaw()||this.create(),JSON.parse(this.getRaw())},e.prototype.set=function(e){localStorage.setItem(this.key,JSON.stringify(e))},e.prototype.clear=function(){localStorage.removeItem(this.key)},e}(),K=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},X=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},$=(0,f.oM)({name:"form",initialState:{head:""},reducers:{setHead:function(e,t){e.head=t.payload}}}),ee=$.reducer,te=$.actions,ne=function(e){return e.form.head},re=new Y("form",{head:""});v({actionCreator:te.setHead,effect:function(e){return K(void 0,void 0,void 0,(function(){return X(this,(function(t){return re.set({head:e.payload}),[2]}))}))}}),v({actionCreator:p.appLoad,effect:function(e,t){return K(void 0,void 0,void 0,(function(){return X(this,(function(e){return t.dispatch(te.setHead(re.get().head)),[2]}))}))}});var ie=((_={})[w.MCQuestion]="MCQ",_[w.TextInputQuestion]="Text Input Question",_),oe=function(){return oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oe.apply(this,arguments)};const ae=function(e){var t=e.id,n=e.children,i=e.type,o=H(ne),a=F(),c=o===t;return(0,r.jsx)("div",{children:(0,r.jsxs)("div",oe({className:"pb-6 flex items-center cursor-grab"},{children:[(0,r.jsx)("span",oe({className:"px-2 py-1 rounded-md bg-slate-700 text-white text-xs"},{children:ie[i]})),c?(0,r.jsx)(D.Z,{className:"w-6 ml-3 text-primary-dark"}):(0,r.jsx)(B.Z,{className:"w-6 ml-3 cursor-pointer",onClick:function(){a(te.setHead(t))}}),n,(0,r.jsx)(W,oe({id:t,className:"ml-auto p-1 px-2 bg-slate-900 text-white rounded-md cursor-pointer"},{children:"Details"}))]}))})};var ce=function(){return ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ce.apply(this,arguments)};const se=function(e){var t=e.content,n=e.onEditingDone,i=e.className,a=e.onFocus;return(0,r.jsx)("div",ce({onFocus:a,onBlur:function(e){n(e.currentTarget.innerText)},contentEditable:!0,suppressContentEditableWarning:!0,className:o()(["cursor-text border-[1px] border-gray-800 rounded-md p-1 nodrag",i]),style:{wordBreak:"break-word"}},{children:t}))};var ue=function(){return ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ue.apply(this,arguments)};const le=function(e){e.id;var t=e.children,n=(e.data,e.selected);return(0,r.jsx)("div",ue({className:o()(["w-[400px] min-h-[100px] bg-slate-400 text-gray-800 rounded-md p-3",n?"bg-orange-200":"bg-slate-400"])},{children:t}))};var de=function(){return de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},de.apply(this,arguments)},fe=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},pe=function(e){var t=F(),n=e.data;function i(e){t(A.updateOne({id:n.id,changes:{choices:n.choices.filter((function(t){return t.id!==e}))}}))}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.HH,{type:"target",position:V.P.Left}),(0,r.jsxs)(le,de({},e,{children:[(0,r.jsx)(ae,de({},n)),(0,r.jsxs)("div",de({className:"flex"},{children:[(0,r.jsx)(se,{content:n.content,onEditingDone:function(e){t(A.updateOne({id:n.id,changes:{content:e}}))},className:"w-2/3 mr-2"}),(0,r.jsxs)("div",de({className:"w-1/3"},{children:[n.choices.map((function(e){return(0,r.jsxs)("div",de({className:"relative mb-2 last:mb-0 flex"},{children:[(0,r.jsx)(l.Z,{className:"w-8 cursor-pointer mr-2 flex-none",onClick:i.bind(null,e.id)}),(0,r.jsx)(se,{content:e.content,onEditingDone:function(r){!function(e,r){t(A.updateOne({id:n.id,changes:{choices:(0,L.ZP)(n.choices,(function(t){for(var n=0,i=t;n<i.length;n++){var o=i[n];o.id===r&&(o.content=e)}}))}}))}(r,e.id)},className:"w-full"}),(0,r.jsx)(Z.HH,{type:"source",id:e.id,position:V.P.Right,style:{top:"50%",right:0,background:"#555",transform:"translateY(-50%)"}})]}),e.id)})),(0,r.jsx)(d.Z,{className:"w-8 cursor-pointer",onClick:function(){t(A.updateOne({id:n.id,changes:{choices:fe(fe([],n.choices,!0),[{id:(0,a.generate)(),content:""}],!1)}}))}})]}))]}))]}))]})};const he=(0,R.memo)(pe);var ve=function(){return ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ve.apply(this,arguments)},ye=function(e){var t=F(),n=e.data;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.HH,{type:"target",position:V.P.Left}),(0,r.jsxs)(le,ve({},e,{children:[(0,r.jsx)(ae,ve({},n)),(0,r.jsx)("div",{children:(0,r.jsx)(se,{content:n.content,onEditingDone:function(e){t(A.updateOne({id:n.id,changes:{content:e}}))}})})]})),(0,r.jsx)(Z.HH,{type:"source",id:"0",position:V.P.Right})]})};const xe=(0,R.memo)(ye);var me=n(9412),ge=n.n(me),be=function(e){switch(e.getData().get("textAlign")){case"ALIGN_LEFT":return"text-left";case"ALIGN_CENTER":return"text-center";case"ALIGN_RIGHT":return"text-right";case"ALIGN_JUSTIFY":return"text-justify";default:return""}},je=function(e){var t=e.value,n=e.onChange,i=e.className,a=(0,R.useState)(ge().createValueFromString(t||"","html")),c=a[0],s=a[1];return(0,r.jsx)(ge(),{value:c,onChange:function(e){console.log(e.toString("html",{})),s(e),n(e.toString("html"))},className:o()("react-rte text-black w-full",i),blockStyleFn:be})},we=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},Oe=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Ne={flowViewPort:{x:0,y:0,zoom:1}},Ce=(0,f.oM)({name:"ui",initialState:Ne,reducers:{setFlowViewPort:function(e,t){e.flowViewPort=t.payload}}}),Ie=Ce.reducer,ke=Ce.actions,Pe=function(e){return e.ui.flowViewPort},Se=new Y("ui",Ne);v({actionCreator:ke.setFlowViewPort,effect:function(e,t){var n=e.payload;return we(void 0,void 0,void 0,(function(){return Oe(this,(function(e){return n&&Se.set({flowViewPort:n}),[2]}))}))}}),v({actionCreator:p.appLoad,effect:function(e,t){return we(void 0,void 0,void 0,(function(){return Oe(this,(function(e){return t.dispatch(ke.setFlowViewPort(Se.get().flowViewPort)),[2]}))}))}});var Me,Te,Ee,Qe=n(4057);!function(e){e.MCQuestionNode="MCQuestionNode",e.TextInputQuestionNode="TextInputQuestionNode"}(Ee||(Ee={}));var Ae=((Me={})[w.MCQuestion]=[Ee.MCQuestionNode],Me[w.TextInputQuestion]=[Ee.TextInputQuestionNode],Me),_e=((Te={})[Ee.MCQuestionNode]=he,Te[Ee.TextInputQuestionNode]=xe,Te),qe=n(1945),Fe=n(6814),He=n(452),Le=n(1044),Re=n(4565),Ze=n(2675),Ve=function(){return Ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ve.apply(this,arguments)};const Be=function(e){var t=e.icon,n=function(){var e=(0,Qe.u)(),t=e.x,n=e.y,r=F();return{add:function(e){var i=window.innerWidth/2+100*Math.random()-t,o=window.innerHeight/2+100*Math.random()-n;switch(e){case w.MCQuestion:r(A.addOne({type:w.MCQuestion,content:"",choices:[],id:(0,Ze.Z)(),flowData:{x:i,y:o}}));break;case w.TextInputQuestion:r(A.addOne({type:w.TextInputQuestion,content:"",id:(0,Ze.Z)(),flowData:{x:i,y:o}}))}}}}().add;return(0,r.jsxs)(Le.v,Ve({as:"div",className:"relative inline-block text-left"},{children:[(0,r.jsx)(Le.v.Button,{children:t}),(0,r.jsx)(Re.u,Ve({as:R.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},{children:(0,r.jsxs)(Le.v.Items,Ve({className:"absolute left-12 -top-4 w-56 mt-2 bg-white divide-y divide-gray-100 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{children:[(0,r.jsx)("div",Ve({className:"px-1 py-1 "},{children:(0,r.jsx)(Le.v.Item,{children:function(e){var t=e.active;return(0,r.jsx)("button",Ve({className:"".concat(t?"bg-primary-main text-white":"text-gray-900"," group flex rounded-md items-center w-full px-2 py-2 text-sm"),onClick:n.bind(null,w.TextInputQuestion)},{children:"Text Input Question"}))}})})),(0,r.jsx)("div",Ve({className:"px-1 py-1 "},{children:(0,r.jsx)(Le.v.Item,{children:function(e){var t=e.active;return(0,r.jsx)("button",Ve({className:"".concat(t?"bg-primary-main text-white":"text-gray-900"," group flex rounded-md items-center w-full px-2 py-2 text-sm"),onClick:n.bind(null,w.MCQuestion)},{children:"Multiple Choice Question"}))}})}))]}))}))]}))};var De=function(){return De=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},De.apply(this,arguments)},Ue=function(e){var t=e.children;return(0,r.jsx)("div",De({className:"cursor-pointer mb-2 last:mb-0 pb-2 border-b-[1px] border-b-gray-200"},{children:t}))};const Ge=function(){var e=H(Q.selectAll),t=H(ne);return(0,r.jsxs)("div",De({className:"bg-slate-200 w-[50px] absolute top-5 left-5 z-[10000] p-2 rounded-lg text-gray-800"},{children:[(0,r.jsx)(Be,{icon:(0,r.jsx)(Ue,{children:(0,r.jsx)(qe.Z,{className:"w-full"})})}),(0,r.jsx)(Ue,{children:(0,r.jsx)(Fe.Z,{onClick:function(){var n,r;n={questions:e,form:{head:t}},(r=document.createElement("a")).setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n))),r.setAttribute("download","questions"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}})}),(0,r.jsx)(Ue,{children:(0,r.jsx)(U.rU,De({to:"form"},{children:(0,r.jsx)(He.Z,{})}))})]}))};function Je(e){var t=[];return e.forEach((function(n){switch(n.type){case w.MCQuestion:n.choices.forEach((function(r){if(r.child&&e.find((function(e){return e.id===r.child}))){var i="".concat(n.id,"-&&-").concat(r.id,"-&&-").concat(r.child);t.push({id:i,source:n.id,target:r.child,sourceHandle:r.id,style:{strokeWidth:"5px"}})}}));break;case w.TextInputQuestion:if(!n.child)return;if(!e.find((function(e){return e.id===n.child})))return;t.push({id:"".concat(n.id,"-&&-").concat(0,"-&&-").concat(n.child),source:n.id,target:n.child,style:{strokeWidth:"5px"}})}})),t}function We(e){return e.map((function(e){var t,n;return{id:e.id,data:e,position:{x:(null===(t=e.flowData)||void 0===t?void 0:t.x)||10,y:(null===(n=e.flowData)||void 0===n?void 0:n.y)||10},type:Ae[e.type].toString()}}))}var ze=function(){return ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ze.apply(this,arguments)},Ye=function(){var e=F(),t=H(Pe),n=function(){var e=H(Q.selectAll),t=H(Q.selectEntities),n=(0,R.useState)(We(e)),r=n[0],i=n[1],o=(0,R.useState)(Je(e)),a=o[0],s=o[1],u=F();(0,R.useEffect)((function(){i(We(e)),s(Je(e))}),[e]);var l=(0,R.useCallback)((function(e){i((function(t){return(0,V.y)(e,t)}));var n=c(e.map((function(e){if("position"===e.type&&e.position)return{id:t[e.id].id,changes:{flowData:e.position}}}))),r=c(e.map((function(e){if("remove"===e.type)return e.id})));n.length>0&&u(A.updateMany(n)),r.length>0&&u(A.deleteMany(r))}),[t]),d=(0,R.useCallback)((function(e){s((function(t){return(0,V.x)(e,t)}));for(var n=c(e.map((function(e){if("remove"===e.type){var t=e.id.split("-&&-"),n=t[0],r=t[1];return{parent:n,child:t[2],choiceId:r}}}))),r=function(e){var n=e.parent,r=e.choiceId,i=t[n];switch(null==i?void 0:i.type){case w.MCQuestion:u(A.updateOne({id:i.id,changes:{choices:(0,L.Uy)(i.choices,(function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];i.id===r&&(i.child=void 0)}}))}}));break;case w.TextInputQuestion:u(A.updateOne({id:i.id,changes:{child:void 0}}))}},i=0,o=n;i<o.length;i++)r(o[i])}),[t]),f=(0,R.useCallback)((function(e){var n=e.source,r=e.target,i=e.sourceHandle,o=t[n];if(o)switch(o.type){case w.MCQuestion:u(A.updateOne({id:o.id,changes:{choices:(0,L.Uy)(o.choices,(function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];o.id===i&&(o.child=r)}}))}}));break;case w.TextInputQuestion:u(A.updateOne({id:o.id,changes:{child:r}}))}}),[t]);return{nodes:r,edges:a,onNodesChange:l,onEdgesChange:d,handleConnection:f}}(),i=n.edges,o=n.nodes,a=n.onEdgesChange,s=n.onNodesChange,u=n.handleConnection,l=(0,R.useState)(null),d=l[0],f=l[1],p=(0,Qe.u)();return(0,R.useEffect)((function(){d&&d.setViewport(t)}),[d]),(0,R.useEffect)((function(){0!==p.x&&e(ke.setFlowViewPort(p))}),[p]),(0,r.jsxs)("div",ze({className:"bg-gray-900 h-full relative"},{children:[(0,r.jsx)(Ge,{}),(0,r.jsx)(Z.ZP,{nodeTypes:_e,nodes:o,edges:i,onNodesChange:s,onEdgesChange:a,onConnect:u,minZoom:Number.NEGATIVE_INFINITY,onInit:f})]}))};const Ke=function(){return(0,r.jsx)(Z.tV,{children:(0,r.jsx)(Ye,{})})};var Xe,$e=(Xe=function(e,t){return Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Xe(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Xe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),et=function(){function e(e){this.question=e}return e.prototype.setQuestion=function(e){this.question=e},e}(),tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $e(t,e),t.prototype.render=function(){return(0,r.jsx)("div",{children:(0,r.jsx)("div",{children:"No details to show for this type of question"})})},t}(et),nt=n(8330),rt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(){return it=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},it.apply(this,arguments)},ot=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function at(e){var t=e.question,n=F();function i(e){n(A.updateOne({id:t.id,changes:{choices:(0,L.ZP)(t.choices,(function(t){var n=t.find((function(t){return t.id===e}));n&&(n.suggestions=ot(ot([],n.suggestions||[],!0),[{id:(0,a.generate)(),content:""}],!1))}))}}))}function o(e){var r=e.choiceId,i=e.suggestionId;return function(e){n(A.updateOne({id:t.id,changes:{choices:(0,L.ZP)(t.choices,(function(t){var n;(null===(n=t.find((function(e){return e.id===r})).suggestions)||void 0===n?void 0:n.find((function(e){return e.id===i}))).content=e}))}}))}}function c(e){var r=e.choiceId,i=e.suggestionId;return function(){n(A.updateOne({id:t.id,changes:{choices:(0,L.ZP)(t.choices,(function(e){var t,n=e.find((function(e){return e.id===r}));n.suggestions=null===(t=n.suggestions)||void 0===t?void 0:t.filter((function(e){return e.id!==i}))}))}}))}}return(0,r.jsx)("div",{children:t.choices.map((function(e){var a,s=e.suggestions||[];return(0,r.jsxs)("div",it({className:"mb-10 last:mb-0"},{children:[(0,r.jsxs)("div",it({className:"flex items-center"},{children:[(0,r.jsx)("div",it({className:" flex-auto p-2 border-[1px] border-gray-700"},{children:e.content})),(0,r.jsxs)("div",it({className:"ml-10"},{children:[(0,r.jsx)("span",it({className:"mr-2"},{children:"Point"})),(0,r.jsx)("input",{className:"bg-transparent p-2  border-[1px] border-gray-500 rounded-md",value:e.point,onChange:(a=e.id,function(e){var r=e.target.value;n(A.updateOne({id:t.id,changes:{choices:(0,L.ZP)(t.choices,(function(e){e.find((function(e){return e.id===a})).point=r}))}}))}),type:"number",step:"0.1"})]}))]})),(0,r.jsxs)("div",it({className:"ml-10 mt-4"},{children:[(0,r.jsx)("div",it({className:"mb-2"},{children:s.map((function(t){return(0,r.jsxs)("div",it({className:"flex items-start mb-2 last:mb-0"},{children:[(0,r.jsx)(je,{value:t.content,onChange:o({choiceId:e.id,suggestionId:t.id})}),(0,r.jsx)(u,it({className:"ml-2",onClick:c({choiceId:e.id,suggestionId:t.id})},{children:"-"}))]}))}))})),(0,r.jsx)(u,it({className:"text-xs",onClick:i.bind(null,e.id)},{children:"Add Suggestion"}))]}))]}))}))})}function ct(e){var t=e.question,n=F(),i=(0,nt.TA)({initialValues:{allowMultiples:Boolean(t.multipleCorrect)},onSubmit:function(){}});return(0,R.useEffect)((function(){n(A.updateOne({id:t.id,changes:{multipleCorrect:i.values.allowMultiples}}))}),[i.values.allowMultiples]),(0,r.jsxs)("div",it({className:"mb-20 flex items-center"},{children:[(0,r.jsx)("input",it({className:"h-6 w-6 mr-6",type:"checkbox",checked:i.values.allowMultiples},i.getFieldProps("allowMultiples"))),(0,r.jsx)("label",it({htmlFor:"allowMultiples"},{children:"Allow Multiple Correct"}))]}))}var st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rt(t,e),t.prototype.render=function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(ct,{question:this.question}),(0,r.jsx)(at,{question:this.question})]})},t}(et),ut=function(){return ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ut.apply(this,arguments)};function lt(e){var t=e.question,n=F();return(0,r.jsxs)("div",ut({className:"mt-2 flex justify-end items-baseline"},{children:[(0,r.jsx)("div",ut({className:"mr-2 font-bold"},{children:"Question Point"})),(0,r.jsx)("input",{type:"number",step:"0.1",className:"bg-transparent p-2  border-[1px] border-gray-500 rounded-md",value:t.point,onChange:function(e){var r=e.target.value;n(A.updateOne({id:t.id,changes:{point:r}}))}})]}))}const dt=function(){var e=F(),t=(0,G.UO)().questionId,n=H((function(e){return Q.selectById(e,t)}));if(!n)return null;var i=function(e){return e.type===w.MCQuestion?new st(e):new tt(e)}(n);return(0,r.jsx)("div",ut({className:"bg-slate-800 text-white min-h-screen py-10"},{children:(0,r.jsxs)("div",ut({className:"container mx-auto"},{children:[(0,r.jsxs)("div",ut({className:"mb-10"},{children:[(0,r.jsxs)("div",ut({className:"p-4 bg-slate-600 rounded-md"},{children:[(0,r.jsxs)("div",ut({className:"flex items-start"},{children:[(0,r.jsx)("div",ut({className:"text-xs font-extrabold px-4 py-2 bg-slate-700 text-white inline-block rounded-md mb-2"},{children:ie[null==n?void 0:n.type]})),(0,r.jsx)(U.rU,ut({to:"/",className:"ml-auto"},{children:(0,r.jsx)(u,ut({className:"text-sm mb-6"},{children:"Back to flow"}))}))]})),(0,r.jsxs)("div",ut({className:"mb-6"},{children:[(0,r.jsx)("h1",ut({className:"mb-1 font-bold"},{children:"Question Overview"})),(0,r.jsx)(je,{onChange:function(t){e(A.updateOne({id:null==n?void 0:n.id,changes:{overview:t}}))},value:n.overview||""})]})),(0,r.jsx)("div",ut({className:"text-xl font-bold"},{children:n.content}))]})),(0,r.jsx)(lt,{question:n})]})),i.render()]}))}))};var ft=(0,f.HF)({sortComparer:function(e,t){return e.order-t.order}}),pt=(0,f.oM)({name:"formPageSlice",initialState:ft.getInitialState(),reducers:{add:ft.addOne,remove:ft.removeOne,update:ft.updateOne,set:ft.setAll}}),ht=pt.reducer,vt=pt.actions,yt=ft.getSelectors((function(e){return e.entities.formPage})),xt=n(6980),mt=function(){return mt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},mt.apply(this,arguments)};function gt(e){return(0,r.jsxs)("svg",mt({viewBox:"0 0 24 24",fill:"none"},e,{children:[(0,r.jsx)("circle",{cx:12,cy:12,r:12,fill:"#fff",opacity:"0.2"}),(0,r.jsx)("path",{d:"M7 13l3 3 7-7",stroke:"#fff",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})]}))}const bt=function(e){var t=F(),n=H((function(t){return yt.selectById(t,e.id)})),i=void 0;return n.choiceId&&(i=e.choices.find((function(e){return e.id===n.choiceId}))),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",mt({className:"text-4xl font-bold mb-10"},{children:e.content})),(0,r.jsx)("div",mt({className:"w-full max-w-md mx-auto"},{children:(0,r.jsxs)(xt.E,mt({value:i,onChange:function(e){t(vt.update({id:n.id,changes:{choiceId:e.id}}))}},{children:[(0,r.jsx)(xt.E.Label,mt({className:"sr-only"},{children:"Server size"})),(0,r.jsx)("div",mt({className:"space-y-2"},{children:e.choices.map((function(e,t){return(0,r.jsx)(xt.E.Option,mt({value:e,className:function(e){var t=e.active,n=e.checked;return"".concat(t?"ring-2 ring-offset-2 ring-offset-sky-300 ring-white ring-opacity-60":"","\n                  ").concat(n?"bg-primary-main bg-opacity-75 text-white":"bg-white","\n                    relative rounded-lg shadow-md px-5 py-4 cursor-pointer flex focus:outline-none")}},{children:function(t){t.active;var n=t.checked;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",mt({className:"flex items-center justify-between w-full"},{children:[(0,r.jsx)("div",mt({className:"flex items-center"},{children:(0,r.jsx)("div",mt({className:"text-sm"},{children:(0,r.jsx)(xt.E.Label,mt({as:"p",className:"font-medium  ".concat(n?"text-white":"text-gray-900")},{children:e.content}))}))})),n&&(0,r.jsx)("div",mt({className:"flex-shrink-0 text-white"},{children:(0,r.jsx)(gt,{className:"w-6 h-6"})}))]}))})}}),t)}))}))]}))}))]})};var jt=function(){return jt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jt.apply(this,arguments)};const wt=function(e){var t=e.question,n=t.id,i=t.content,o=e.formPage.inputValue,a=void 0===o?"":o,c=F();return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",jt({className:"text-4xl font-bold mb-10"},{children:i})),(0,r.jsx)("input",{type:"text",className:"p-3 border-[1px] border-gray-500 bg-transparent w-full rounded-md",value:a,onChange:function(e){c(vt.update({id:n,changes:{inputValue:e.target.value}}))}})]})};var Ot=function(){return Ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ot.apply(this,arguments)};const Nt=function(){var e=F(),t=H(ne),n=(0,q.v9)(yt.selectAll),i=n[n.length-1],o=H((function(e){return Q.selectById(e,null==i?void 0:i.id)}));if((0,R.useEffect)((function(){e(vt.set([{id:t,order:0}]))}),[t]),!o||!i)return null;var a=t===o.id;return(0,r.jsxs)("div",Ot({className:"min-h-screen bg-gray-300 flex items-center justify-center"},{children:[(0,r.jsxs)("div",Ot({className:"w-2/3 max-w-4xl"},{children:[(0,r.jsx)("div",Ot({className:"text-center"},{children:function(){if(!o)return null;switch(o.type){case w.MCQuestion:return(0,r.jsx)(bt,Ot({},o));case w.TextInputQuestion:return(0,r.jsx)(wt,{question:o,formPage:i});default:return null}}()})),(0,r.jsxs)("div",Ot({className:"flex mt-20"},{children:[!a&&(0,r.jsx)(u,Ot({className:"w-full mr-2",onClick:function(){o.id!==t&&e(vt.remove(o.id))}},{children:"Previous"})),(0,r.jsx)(u,Ot({className:"w-full",onClick:function(){var t,r;switch(o.type){case w.MCQuestion:var a=i.choiceId;a&&(r=null===(t=o.choices.find((function(e){return e.id===a})))||void 0===t?void 0:t.child);break;case w.TextInputQuestion:r=o.child}r&&e(vt.add({id:r,order:n.length}))}},{children:"Next"}))]}))]})),(0,r.jsx)(U.rU,Ot({to:"/",className:"fixed bottom-10 right-10 p-4 bg-slate-200 rounded-md"},{children:"Return to Flow"}))]}))};var Ct=function(){return Ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ct.apply(this,arguments)};var It=n(7995),kt=n(10),Pt=(0,f.xC)({reducer:{form:ee,entities:(0,kt.UY)({questions:E,formPage:ht}),ui:Ie},middleware:function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([h.middleware],(0,f.Bx)(),!0)});window._store=Pt;var St=function(){return St=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},St.apply(this,arguments)};It.render((0,r.jsx)(U.UT,{children:(0,r.jsx)(q.zt,St({store:Pt},{children:(0,r.jsx)((function(){var e=F();return(0,R.useEffect)((function(){e(p.appLoad())}),[]),(0,r.jsxs)(G.Z5,{children:[(0,r.jsx)(G.AW,{path:"/",element:(0,r.jsx)("div",Ct({className:"h-screen w-screen bg-gray-800 text-white p-8"},{children:(0,r.jsx)(Ke,{})}))}),(0,r.jsx)(G.AW,{path:"/form",element:(0,r.jsx)(Nt,{})}),(0,r.jsx)(G.AW,{path:"details/:questionId",element:(0,r.jsx)(dt,{})})]})}),{})}))}),document.getElementById("root"))}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=(t,n,i,o)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,i,o]=e[l],c=!0,s=0;s<n.length;s++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(c=!1,o<a&&(a=o));if(c){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,i,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={296:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,c,s]=n,u=0;if(a.some((t=>0!==e[t]))){for(i in c)r.o(c,i)&&(r.m[i]=c[i]);if(s)var l=s(r)}for(t&&t(n);u<a.length;u++)o=a[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(l)},n=self.webpackChunk_survey_form_app=self.webpackChunk_survey_form_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=r.O(void 0,[899],(()=>r(7123)));i=r.O(i)})();