(()=>{"use strict";var e,t={6582:(e,t,n)=>{var r=n(5893),i=n(2160),o=[],a=function(){function e(e,t){if(this.key=e,this.initialState=t,o.includes(this.key))throw new Error("Key already exist")}return e.prototype.create=function(){localStorage.setItem(this.key,JSON.stringify(this.initialState))},e.prototype.getRaw=function(){return localStorage.getItem(this.key)},e.prototype.get=function(){return this.getRaw()||this.create(),JSON.parse(this.getRaw())},e.prototype.set=function(e){localStorage.setItem(this.key,JSON.stringify(e))},e.prototype.clear=function(){localStorage.removeItem(this.key)},e}(),c={logout:(0,i.PH)("LOGOUT"),appLoad:(0,i.PH)("APP_LOAD")},s=(0,i.e)(),u=s.startListening,l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},f={flowViewPort:{x:0,y:0,zoom:1}},p=(0,i.oM)({name:"ui",initialState:f,reducers:{setFlowViewPort:function(e,t){e.flowViewPort=t.payload}}}),h=p.reducer,v=p.actions,y=function(e){return e.ui.flowViewPort},g=new a("ui",f);u({actionCreator:v.setFlowViewPort,effect:function(e,t){var n=e.payload;return l(void 0,void 0,void 0,(function(){return d(this,(function(e){return n&&g.set({flowViewPort:n}),[2]}))}))}}),u({actionCreator:c.appLoad,effect:function(e,t){return l(void 0,void 0,void 0,(function(){return d(this,(function(e){return t.dispatch(v.setFlowViewPort(g.get().flowViewPort)),[2]}))}))}});var x=n(9704),m=function(){return(0,x.I0)()},b=x.v9,w=n(7294),j=n(3821),O=n(6442),N=n(3616),k=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},I=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},S="questions";function P(){return localStorage.getItem(S)||localStorage.setItem(S,JSON.stringify([])),JSON.parse(localStorage.getItem(S))}function T(e){localStorage.setItem(S,JSON.stringify(e))}var M,Q,E={add:function(e){return k(this,void 0,void 0,(function(){return C(this,(function(t){return T(I(I([],P(),!0),[e],!1)),[2]}))}))},update:function(e){return k(this,void 0,void 0,(function(){var t,n;return C(this,(function(r){return(t=V.selectEntities(window._store.getState())[e])?((n=P().filter((function(t){return t.id!==e}))).push(t),T(n),[2]):[2]}))}))},remove:function(e){return k(this,void 0,void 0,(function(){return C(this,(function(t){return T(P().filter((function(t){return t.id!==e}))),[2]}))}))},getAll:function(){return k(this,void 0,void 0,(function(){return C(this,(function(e){return[2,P()]}))}))},removeMany:function(e){return k(this,void 0,void 0,(function(){return C(this,(function(t){return T(P().filter((function(t){return!e.includes(t.id)}))),[2]}))}))}},A=n(6486),H=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},F=new(function(){function e(){this.queue=[],this.updaterIdle=!0}return e.prototype.addChanges=function(e){var t=H(H([],e,!0),this.queue,!0);this.queue=(0,A.uniq)(t),this.intervalRef||this.startTimer()},e.prototype.startTimer=function(){var e=this;this.intervalRef=setInterval((function(){e.updaterIdle&&e.syncChanges()}),3e3)},e.prototype.stopTimer=function(){this.intervalRef&&(clearInterval(this.intervalRef),this.intervalRef=null)},e.prototype.syncChanges=function(){var e=this,t=(0,A.takeRight)(this.queue,5);this.queue=(0,A.dropRight)(this.queue,5),this.updaterIdle=!1;var n=[];(0,A.eachRight)(t,(function(e){n.push(E.update(e))})),Promise.allSettled(n).then((function(){e.updaterIdle=!0})),0===this.queue.length&&this.stopTimer()},e}()),L=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},R=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Z=(0,i.HF)(),_=(0,i.oM)({name:"question",initialState:Z.getInitialState(),reducers:{addOne:Z.addOne,updateOne:Z.updateOne,updateMany:Z.updateMany,deleteMany:Z.removeMany,setAll:Z.setAll}}),q=_.reducer,V=Z.getSelectors((function(e){return e.entities.questions})),B=_.actions;u({actionCreator:c.appLoad,effect:function(e,t){E.getAll().then((function(e){t.dispatch(B.setAll(e))}))}}),u({actionCreator:B.updateMany,effect:function(e){F.addChanges(e.payload.map((function(e){return e.id.toString()})))}}),u({actionCreator:B.addOne,effect:function(e){return L(void 0,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,E.add(e.payload)];case 1:return t.sent(),[2]}}))}))}}),u({actionCreator:B.deleteMany,effect:function(e){return L(void 0,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,E.removeMany(e.payload.map((function(e){return e.toString()})))];case 1:return t.sent(),[2]}}))}))}}),u({actionCreator:B.updateOne,effect:function(e){return L(void 0,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,E.update(e.payload.id.toString())];case 1:return t.sent(),[2]}}))}))}}),(Q=M||(M={})).MCQuestion="MCQuestion",Q.TextInputQuestion="TextInputQuestion";var D=n(4184),J=n.n(D);function W(e){return e.filter(Boolean)}var G,U=n(8172),z=n(4670),Y=n(1782),K=n(5575),X=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},$=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},ee=(0,i.oM)({name:"form",initialState:{head:""},reducers:{setHead:function(e,t){e.head=t.payload}}}),te=ee.reducer,ne=ee.actions,re=function(e){return e.form.head},ie=new a("form",{head:""});u({actionCreator:ne.setHead,effect:function(e){return X(void 0,void 0,void 0,(function(){return $(this,(function(t){return ie.set({head:e.payload}),[2]}))}))}}),u({actionCreator:c.appLoad,effect:function(e,t){return X(void 0,void 0,void 0,(function(){return $(this,(function(e){return t.dispatch(ne.setHead(ie.get().head)),[2]}))}))}});var oe=((G={})[M.MCQuestion]="MCQ",G[M.TextInputQuestion]="Text Input Question",G),ae=function(){return ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ae.apply(this,arguments)};const ce=function(e){var t=e.id,n=e.children,i=e.type,o=b(re),a=m(),c=o===t;return(0,r.jsx)("div",{children:(0,r.jsxs)("div",ae({className:"pb-6 flex items-center cursor-grab"},{children:[(0,r.jsx)("span",ae({className:"px-2 py-1 rounded-md bg-slate-700 text-white text-xs"},{children:oe[i]})),c?(0,r.jsx)(K.Z,{className:"w-6 ml-3 text-primary-dark"}):(0,r.jsx)(Y.Z,{className:"w-6 ml-3 cursor-pointer",onClick:function(){a(ne.setHead(t))}}),n]}))})};var se=function(){return se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},se.apply(this,arguments)};const ue=function(e){var t=e.content,n=e.onEditingDone,i=e.className,o=e.onFocus;return(0,r.jsx)("div",se({onFocus:o,onBlur:function(e){n(e.currentTarget.innerText)},contentEditable:!0,suppressContentEditableWarning:!0,className:J()(["cursor-text border-[1px] border-gray-800 rounded-md p-1 nodrag",i]),style:{wordBreak:"break-word"}},{children:t}))};var le=function(){return le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},le.apply(this,arguments)};const de=function(e){e.id;var t=e.children,n=(e.data,e.selected);return(0,r.jsx)("div",le({className:J()(["w-[400px] min-h-[100px] bg-slate-400 text-gray-800 rounded-md p-3",n?"bg-orange-200":"bg-slate-400"])},{children:t}))};var fe=function(){return fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},fe.apply(this,arguments)},pe=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},he=function(e){var t=m(),n=e.data;function i(e){t(B.updateOne({id:n.id,changes:{choices:n.choices.filter((function(t){return t.id!==e}))}}))}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.HH,{type:"target",position:j.Ly.Left}),(0,r.jsxs)(de,fe({},e,{children:[(0,r.jsx)(ce,fe({},n)),(0,r.jsxs)("div",fe({className:"flex"},{children:[(0,r.jsx)(ue,{content:n.content,onEditingDone:function(e){t(B.updateOne({id:n.id,changes:{content:e}}))},className:"w-2/3 mr-2"}),(0,r.jsxs)("div",fe({className:"w-1/3"},{children:[n.choices.map((function(e){return(0,r.jsxs)("div",fe({className:"relative mb-2 last:mb-0 flex"},{children:[(0,r.jsx)(O.Z,{className:"w-8 cursor-pointer mr-2 flex-none",onClick:i.bind(null,e.id)}),(0,r.jsx)(ue,{content:e.content,onEditingDone:function(r){!function(e,r){t(B.updateOne({id:n.id,changes:{choices:(0,U.ZP)(n.choices,(function(t){for(var n=0,i=t;n<i.length;n++){var o=i[n];o.id===r&&(o.content=e)}}))}}))}(r,e.id)},className:"w-full"}),(0,r.jsx)(j.HH,{type:"source",id:e.id,position:j.Ly.Right,style:{top:"50%",right:0,background:"#555",transform:"translateY(-50%)"}})]}),e.id)})),(0,r.jsx)(N.Z,{className:"w-8 cursor-pointer",onClick:function(){t(B.updateOne({id:n.id,changes:{choices:pe(pe([],n.choices,!0),[{id:(0,z.generate)(),content:""}],!1)}}))}})]}))]}))]}))]})};const ve=(0,w.memo)(he);var ye=function(){return ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ye.apply(this,arguments)},ge=function(e){var t=m(),n=e.data;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.HH,{type:"target",position:j.Ly.Left}),(0,r.jsxs)(de,ye({},e,{children:[(0,r.jsx)(ce,ye({},n)),(0,r.jsx)("div",{children:(0,r.jsx)(ue,{content:n.content,onEditingDone:function(e){t(B.updateOne({id:n.id,changes:{content:e}}))}})})]})),(0,r.jsx)(j.HH,{type:"source",id:"0",position:j.Ly.Right})]})};const xe=(0,w.memo)(ge);var me,be,we;!function(e){e.MCQuestionNode="MCQuestionNode",e.TextInputQuestionNode="TextInputQuestionNode"}(we||(we={}));var je=((me={})[M.MCQuestion]=[we.MCQuestionNode],me[M.TextInputQuestion]=[we.TextInputQuestionNode],me),Oe=((be={})[we.MCQuestionNode]=ve,be[we.TextInputQuestionNode]=xe,be),Ne=n(219),ke=n(3003),Ce=n(6432),Ie=n(9711),Se=n(6727),Pe=n(4586),Te=function(){return Te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Te.apply(this,arguments)};const Me=function(e){var t=e.icon,n=function(){var e=(0,j.Sj)(),t=e.x,n=e.y,r=m();return{add:function(e){var i=window.innerWidth/2+100*Math.random()-t,o=window.innerHeight/2+100*Math.random()-n;switch(e){case M.MCQuestion:r(B.addOne({type:M.MCQuestion,content:"",choices:[],id:(0,Pe.Z)(),flowData:{x:i,y:o}}));break;case M.TextInputQuestion:r(B.addOne({type:M.TextInputQuestion,content:"",id:(0,Pe.Z)(),flowData:{x:i,y:o}}))}}}}().add;return(0,r.jsxs)(Se.v2,Te({as:"div",className:"relative inline-block text-left"},{children:[(0,r.jsx)(Se.v2.Button,{children:t}),(0,r.jsx)(Se.uT,Te({as:w.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},{children:(0,r.jsxs)(Se.v2.Items,Te({className:"absolute left-12 -top-4 w-56 mt-2 bg-white divide-y divide-gray-100 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{children:[(0,r.jsx)("div",Te({className:"px-1 py-1 "},{children:(0,r.jsx)(Se.v2.Item,{children:function(e){var t=e.active;return(0,r.jsx)("button",Te({className:"".concat(t?"bg-primary-main text-white":"text-gray-900"," group flex rounded-md items-center w-full px-2 py-2 text-sm"),onClick:n.bind(null,M.TextInputQuestion)},{children:"Text Input Question"}))}})})),(0,r.jsx)("div",Te({className:"px-1 py-1 "},{children:(0,r.jsx)(Se.v2.Item,{children:function(e){var t=e.active;return(0,r.jsx)("button",Te({className:"".concat(t?"bg-primary-main text-white":"text-gray-900"," group flex rounded-md items-center w-full px-2 py-2 text-sm"),onClick:n.bind(null,M.MCQuestion)},{children:"Multiple Choice Question"}))}})}))]}))}))]}))};var Qe=function(){return Qe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Qe.apply(this,arguments)},Ee=function(e){var t=e.children;return(0,r.jsx)("div",Qe({className:"cursor-pointer mb-2 last:mb-0 pb-2 border-b-[1px] border-b-gray-200"},{children:t}))};const Ae=function(){var e=b(V.selectAll);return(0,r.jsxs)("div",Qe({className:"bg-slate-200 w-[50px] absolute top-5 left-5 z-[10000] p-2 rounded-lg text-gray-800"},{children:[(0,r.jsx)(Me,{icon:(0,r.jsx)(Ee,{children:(0,r.jsx)(Ne.Z,{className:"w-full"})})}),(0,r.jsx)(Ee,{children:(0,r.jsx)(ke.Z,{onClick:function(){var t,n;t=e,(n=document.createElement("a")).setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t))),n.setAttribute("download","questions"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}})}),(0,r.jsx)(Ee,{children:(0,r.jsx)(Ie.rU,Qe({to:"form"},{children:(0,r.jsx)(Ce.Z,{})}))})]}))};function He(e){var t=[];return e.forEach((function(n){switch(n.type){case M.MCQuestion:n.choices.forEach((function(r){if(r.child&&e.find((function(e){return e.id===r.child}))){var i="".concat(n.id,"-&&-").concat(r.id,"-&&-").concat(r.child);t.push({id:i,source:n.id,target:r.child,sourceHandle:r.id,style:{strokeWidth:"5px"}})}}));break;case M.TextInputQuestion:if(!n.child)return;if(!e.find((function(e){return e.id===n.child})))return;t.push({id:"".concat(n.id,"-&&-").concat(0,"-&&-").concat(n.child),source:n.id,target:n.child,style:{strokeWidth:"5px"}})}})),t}function Fe(e){return e.map((function(e){var t,n;return{id:e.id,data:e,position:{x:(null===(t=e.flowData)||void 0===t?void 0:t.x)||10,y:(null===(n=e.flowData)||void 0===n?void 0:n.y)||10},type:je[e.type].toString()}}))}var Le=function(){return Le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Le.apply(this,arguments)},Re=function(){var e=m(),t=b(y),n=function(){var e=b(V.selectAll),t=b(V.selectEntities),n=(0,w.useState)(Fe(e)),r=n[0],i=n[1],o=(0,w.useState)(He(e)),a=o[0],c=o[1],s=m();(0,w.useEffect)((function(){i(Fe(e)),c(He(e))}),[e]);var u=(0,w.useCallback)((function(e){i((function(t){return(0,j.Fb)(e,t)}));var n=W(e.map((function(e){if("position"===e.type&&e.position)return{id:t[e.id].id,changes:{flowData:e.position}}}))),r=W(e.map((function(e){if("remove"===e.type)return e.id})));n.length>0&&s(B.updateMany(n)),r.length>0&&s(B.deleteMany(r))}),[t]),l=(0,w.useCallback)((function(e){c((function(t){return(0,j.yn)(e,t)}));for(var n=W(e.map((function(e){if("remove"===e.type){var t=e.id.split("-&&-"),n=t[0],r=t[1];return{parent:n,child:t[2],choiceId:r}}}))),r=function(e){var n=e.parent,r=e.choiceId,i=t[n];switch(null==i?void 0:i.type){case M.MCQuestion:s(B.updateOne({id:i.id,changes:{choices:(0,U.ZP)(i.choices,(function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];i.id===r&&(i.child=void 0)}}))}}));break;case M.TextInputQuestion:s(B.updateOne({id:i.id,changes:{child:void 0}}))}},i=0,o=n;i<o.length;i++)r(o[i])}),[t]),d=(0,w.useCallback)((function(e){var n=e.source,r=e.target,i=e.sourceHandle,o=t[n];if(o)switch(o.type){case M.MCQuestion:s(B.updateOne({id:o.id,changes:{choices:(0,U.ZP)(o.choices,(function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];o.id===i&&(o.child=r)}}))}}));break;case M.TextInputQuestion:s(B.updateOne({id:o.id,changes:{child:r}}))}}),[t]);return{nodes:r,edges:a,onNodesChange:u,onEdgesChange:l,handleConnection:d}}(),i=n.edges,o=n.nodes,a=n.onEdgesChange,c=n.onNodesChange,s=n.handleConnection,u=(0,w.useState)(null),l=u[0],d=u[1],f=(0,j.Sj)();return(0,w.useEffect)((function(){l&&l.setViewport(t)}),[l]),(0,w.useEffect)((function(){0!==f.x&&e(v.setFlowViewPort(f))}),[f]),(0,r.jsxs)("div",Le({className:"bg-gray-900 h-full relative"},{children:[(0,r.jsx)(Ae,{}),(0,r.jsx)(j.ZP,{nodeTypes:Oe,nodes:o,edges:i,onNodesChange:c,onEdgesChange:a,onConnect:s,minZoom:Number.NEGATIVE_INFINITY,onInit:d})]}))};const Ze=function(){return(0,r.jsx)(j.tV,{children:(0,r.jsx)(Re,{})})};var _e=function(){return _e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_e.apply(this,arguments)};const qe=function(e){var t=e.children,n=e.className,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["children","className"]);return(0,r.jsx)("button",_e({className:J()(["bg-primary-main text-white px-6 py-2 text-xl rounded-lg","active:bg-primary-dark","transition-colors",n])},i,{children:t}))};var Ve=(0,i.HF)({sortComparer:function(e,t){return e.order-t.order}}),Be=(0,i.oM)({name:"formPageSlice",initialState:Ve.getInitialState(),reducers:{add:Ve.addOne,remove:Ve.removeOne,update:Ve.updateOne,set:Ve.setAll}}),De=Be.reducer,Je=Be.actions,We=Ve.getSelectors((function(e){return e.entities.formPage})),Ge=function(){return Ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ge.apply(this,arguments)};function Ue(e){return(0,r.jsxs)("svg",Ge({viewBox:"0 0 24 24",fill:"none"},e,{children:[(0,r.jsx)("circle",{cx:12,cy:12,r:12,fill:"#fff",opacity:"0.2"}),(0,r.jsx)("path",{d:"M7 13l3 3 7-7",stroke:"#fff",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})]}))}const ze=function(e){var t=m(),n=b((function(t){return We.selectById(t,e.id)})),i=void 0;return n.choiceId&&(i=e.choices.find((function(e){return e.id===n.choiceId}))),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",Ge({className:"text-4xl font-bold mb-10"},{children:e.content})),(0,r.jsx)("div",Ge({className:"w-full max-w-md mx-auto"},{children:(0,r.jsxs)(Se.Ee,Ge({value:i,onChange:function(e){t(Je.update({id:n.id,changes:{choiceId:e.id}}))}},{children:[(0,r.jsx)(Se.Ee.Label,Ge({className:"sr-only"},{children:"Server size"})),(0,r.jsx)("div",Ge({className:"space-y-2"},{children:e.choices.map((function(e,t){return(0,r.jsx)(Se.Ee.Option,Ge({value:e,className:function(e){var t=e.active,n=e.checked;return"".concat(t?"ring-2 ring-offset-2 ring-offset-sky-300 ring-white ring-opacity-60":"","\n                  ").concat(n?"bg-primary-main bg-opacity-75 text-white":"bg-white","\n                    relative rounded-lg shadow-md px-5 py-4 cursor-pointer flex focus:outline-none")}},{children:function(t){t.active;var n=t.checked;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",Ge({className:"flex items-center justify-between w-full"},{children:[(0,r.jsx)("div",Ge({className:"flex items-center"},{children:(0,r.jsx)("div",Ge({className:"text-sm"},{children:(0,r.jsx)(Se.Ee.Label,Ge({as:"p",className:"font-medium  ".concat(n?"text-white":"text-gray-900")},{children:e.content}))}))})),n&&(0,r.jsx)("div",Ge({className:"flex-shrink-0 text-white"},{children:(0,r.jsx)(Ue,{className:"w-6 h-6"})}))]}))})}}),t)}))}))]}))}))]})};var Ye=function(){return Ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ye.apply(this,arguments)};const Ke=function(e){var t=e.id,n=e.content,i=m();return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",Ye({className:"text-4xl font-bold mb-10"},{children:n})),(0,r.jsx)("input",{type:"text",className:"p-3 border-[1px] border-gray-500 bg-transparent w-full rounded-md",onBlur:function(e){i(Je.update({id:t,changes:{inputValue:e.target.value}}))}})]})};var Xe=function(){return Xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Xe.apply(this,arguments)};const $e=function(){var e=m(),t=b(re),n=(0,x.v9)(We.selectAll),i=n[n.length-1],o=b((function(e){return V.selectById(e,null==i?void 0:i.id)}));if((0,w.useEffect)((function(){e(Je.set([{id:t,order:0}]))}),[t]),!o||!i)return null;var a=t===o.id;return(0,r.jsxs)("div",Xe({className:"min-h-screen bg-gray-300 flex items-center justify-center"},{children:[(0,r.jsxs)("div",Xe({className:"w-2/3 max-w-4xl"},{children:[(0,r.jsx)("div",Xe({className:"text-center"},{children:function(){if(!o)return null;switch(o.type){case M.MCQuestion:return(0,r.jsx)(ze,Xe({},o));case M.TextInputQuestion:return(0,r.jsx)(Ke,Xe({},o));default:return null}}()})),(0,r.jsxs)("div",Xe({className:"flex mt-20"},{children:[!a&&(0,r.jsx)(qe,Xe({className:"w-full mr-2",onClick:function(){o.id!==t&&e(Je.remove(o.id))}},{children:"Previous"})),(0,r.jsx)(qe,Xe({className:"w-full",onClick:function(){var t,r;switch(o.type){case M.MCQuestion:var a=i.choiceId;a&&(r=null===(t=o.choices.find((function(e){return e.id===a})))||void 0===t?void 0:t.child);break;case M.TextInputQuestion:r=o.child}r&&e(Je.add({id:r,order:n.length}))}},{children:"Next"}))]}))]})),(0,r.jsx)(Ie.rU,Xe({to:"/",className:"fixed bottom-10 right-10 p-4 bg-slate-200 rounded-md"},{children:"Return to Flow"}))]}))};var et=n(6974),tt=function(){return tt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tt.apply(this,arguments)};var nt=n(3935),rt=n(3828),it=(0,i.xC)({reducer:{form:te,entities:(0,rt.UY)({questions:q,formPage:De}),ui:h},middleware:function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([s.middleware],(0,i.Bx)(),!0)});window._store=it;var ot=function(){return ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ot.apply(this,arguments)};nt.render((0,r.jsx)(Ie.UT,{children:(0,r.jsx)(x.zt,ot({store:it},{children:(0,r.jsx)((function(){var e=m();return(0,w.useEffect)((function(){e(c.appLoad())}),[]),(0,r.jsxs)(et.Z5,{children:[(0,r.jsx)(et.AW,{path:"/",element:(0,r.jsx)("div",tt({className:"h-screen w-screen bg-gray-800 text-white p-8"},{children:(0,r.jsx)(Ze,{})}))}),(0,r.jsx)(et.AW,{path:"/form",element:(0,r.jsx)($e,{})})]})}),{})}))}),document.getElementById("root"))}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=(t,n,i,o)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,i,o]=e[l],c=!0,s=0;s<n.length;s++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(c=!1,o<a&&(a=o));if(c){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,i,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={296:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,c,s]=n,u=0;if(a.some((t=>0!==e[t]))){for(i in c)r.o(c,i)&&(r.m[i]=c[i]);if(s)var l=s(r)}for(t&&t(n);u<a.length;u++)o=a[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(l)},n=self.webpackChunk_survey_form_app=self.webpackChunk_survey_form_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=r.O(void 0,[498],(()=>r(6582)));i=r.O(i)})();