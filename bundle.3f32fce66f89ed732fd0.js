(()=>{"use strict";var e,t={8441:(e,t,n)=>{var r=n(4637),i=n(9803),o=n.n(i),a=n(576);function c(e){return e.filter(Boolean)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};const u=function(e){var t=e.children,n=e.className,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["children","className"]);return(0,r.jsx)("button",s({className:o()(["bg-primary-main text-white px-6 py-2 text-xl rounded-lg","active:bg-primary-dark","transition-colors",n])},i,{children:t}))};var l=n(6935),d=n(8030),f=n(9800),p={logout:(0,f.PH)("LOGOUT"),appLoad:(0,f.PH)("APP_LOAD")},h=(0,f.e)(),v=h.startListening,y=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},x=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},g=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},m="questions";function b(){return localStorage.getItem(m)||localStorage.setItem(m,JSON.stringify([])),JSON.parse(localStorage.getItem(m))}function j(e){localStorage.setItem(m,JSON.stringify(e))}var w,O,N={add:function(e){return y(this,void 0,void 0,(function(){return x(this,(function(t){return j(g(g([],b(),!0),[e],!1)),[2]}))}))},update:function(e){return y(this,void 0,void 0,(function(){var t,n;return x(this,(function(r){return(t=E.selectEntities(window._store.getState())[e])?((n=b().filter((function(t){return t.id!==e}))).push(t),j(n),[2]):[2]}))}))},remove:function(e){return y(this,void 0,void 0,(function(){return x(this,(function(t){return j(b().filter((function(t){return t.id!==e}))),[2]}))}))},getAll:function(){return y(this,void 0,void 0,(function(){return x(this,(function(e){return[2,b()]}))}))},removeMany:function(e){return y(this,void 0,void 0,(function(){return x(this,(function(t){return j(b().filter((function(t){return!e.includes(t.id)}))),[2]}))}))}},C=n(2699),k=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},I=new(function(){function e(){this.queue=[],this.updaterIdle=!0}return e.prototype.addChanges=function(e){var t=k(k([],e,!0),this.queue,!0);this.queue=(0,C.uniq)(t),this.intervalRef||this.startTimer()},e.prototype.startTimer=function(){var e=this;this.intervalRef=setInterval((function(){e.updaterIdle&&e.syncChanges()}),3e3)},e.prototype.stopTimer=function(){this.intervalRef&&(clearInterval(this.intervalRef),this.intervalRef=null)},e.prototype.syncChanges=function(){var e=this,t=(0,C.takeRight)(this.queue,5);this.queue=(0,C.dropRight)(this.queue,5),this.updaterIdle=!1;var n=[];(0,C.eachRight)(t,(function(e){n.push(N.update(e))})),Promise.allSettled(n).then((function(){e.updaterIdle=!0})),0===this.queue.length&&this.stopTimer()},e}()),P=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Q=(0,f.HF)(),T=(0,f.oM)({name:"question",initialState:Q.getInitialState(),reducers:{addOne:Q.addOne,updateOne:Q.updateOne,updateMany:Q.updateMany,deleteMany:Q.removeMany,setAll:Q.setAll}}),M=T.reducer,E=Q.getSelectors((function(e){return e.entities.questions})),A=T.actions;v({actionCreator:p.appLoad,effect:function(e,t){N.getAll().then((function(e){t.dispatch(A.setAll(e))}))}}),v({actionCreator:A.updateMany,effect:function(e){I.addChanges(e.payload.map((function(e){return e.id.toString()})))}}),v({actionCreator:A.addOne,effect:function(e){return P(void 0,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,N.add(e.payload)];case 1:return t.sent(),[2]}}))}))}}),v({actionCreator:A.deleteMany,effect:function(e){return P(void 0,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,N.removeMany(e.payload.map((function(e){return e.toString()})))];case 1:return t.sent(),[2]}}))}))}}),v({actionCreator:A.updateOne,effect:function(e){return P(void 0,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,N.update(e.payload.id.toString())];case 1:return t.sent(),[2]}}))}))}}),(O=w||(w={})).MCQuestion="MCQuestion",O.TextInputQuestion="TextInputQuestion";var _,q=n(1257),H=function(){return(0,q.I0)()},F=q.v9,Z=n(6846),R=n(9496),L=n(2973),V=n(4805),B=n(6786),D=n(7928),U=n(3688),W=n(4937),J=function(){return J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},J.apply(this,arguments)},G=function(e){var t=e.children,n=e.id,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["children","id"]);return(0,r.jsx)(U.rU,J({to:"details/".concat(n)},i,{children:t}))},z=[],Y=function(){function e(e,t){if(this.key=e,this.initialState=t,z.includes(this.key))throw new Error("Key already exist")}return e.prototype.create=function(){localStorage.setItem(this.key,JSON.stringify(this.initialState))},e.prototype.getRaw=function(){return localStorage.getItem(this.key)},e.prototype.get=function(){return this.getRaw()||this.create(),JSON.parse(this.getRaw())},e.prototype.set=function(e){localStorage.setItem(this.key,JSON.stringify(e))},e.prototype.clear=function(){localStorage.removeItem(this.key)},e}(),K=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},X=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},$=(0,f.oM)({name:"form",initialState:{head:""},reducers:{setHead:function(e,t){e.head=t.payload}}}),ee=$.reducer,te=$.actions,ne=function(e){return e.form.head},re=new Y("form",{head:""});v({actionCreator:te.setHead,effect:function(e){return K(void 0,void 0,void 0,(function(){return X(this,(function(t){return re.set({head:e.payload}),[2]}))}))}}),v({actionCreator:p.appLoad,effect:function(e,t){return K(void 0,void 0,void 0,(function(){return X(this,(function(e){return t.dispatch(te.setHead(re.get().head)),[2]}))}))}});var ie=((_={})[w.MCQuestion]="MCQ",_[w.TextInputQuestion]="Text Input Question",_),oe=function(){return oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oe.apply(this,arguments)};const ae=function(e){var t=e.id,n=e.children,i=e.type,o=F(ne),a=H(),c=o===t;return(0,r.jsx)("div",{children:(0,r.jsxs)("div",oe({className:"pb-6 flex items-center cursor-grab"},{children:[(0,r.jsx)("span",oe({className:"px-2 py-1 rounded-md bg-slate-700 text-white text-xs"},{children:ie[i]})),c?(0,r.jsx)(D.Z,{className:"w-6 ml-3 text-primary-dark"}):(0,r.jsx)(B.Z,{className:"w-6 ml-3 cursor-pointer",onClick:function(){a(te.setHead(t))}}),n,(0,r.jsx)(G,oe({id:t,className:"ml-auto p-1 px-2 bg-slate-900 text-white rounded-md cursor-pointer"},{children:"Details"}))]}))})};var ce=function(){return ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ce.apply(this,arguments)};const se=function(e){var t=e.content,n=e.onEditingDone,i=e.className,a=e.onFocus;return(0,r.jsx)("div",ce({onFocus:a,onBlur:function(e){n(e.currentTarget.innerText)},contentEditable:!0,suppressContentEditableWarning:!0,className:o()(["cursor-text border-[1px] border-gray-800 rounded-md p-1 nodrag",i]),style:{wordBreak:"break-word"}},{children:t}))};var ue=function(){return ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ue.apply(this,arguments)};const le=function(e){e.id;var t=e.children,n=(e.data,e.selected);return(0,r.jsx)("div",ue({className:o()(["w-[400px] min-h-[100px] bg-slate-400 text-gray-800 rounded-md p-3",n?"bg-orange-200":"bg-slate-400"])},{children:t}))};var de=function(){return de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},de.apply(this,arguments)},fe=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},pe=function(e){var t=H(),n=e.data;function i(e){t(A.updateOne({id:n.id,changes:{choices:n.choices.filter((function(t){return t.id!==e}))}}))}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.HH,{type:"target",position:V.P.Left}),(0,r.jsxs)(le,de({},e,{children:[(0,r.jsx)(ae,de({},n)),(0,r.jsxs)("div",de({className:"flex"},{children:[(0,r.jsx)(se,{content:n.content,onEditingDone:function(e){t(A.updateOne({id:n.id,changes:{content:e}}))},className:"w-2/3 mr-2"}),(0,r.jsxs)("div",de({className:"w-1/3"},{children:[n.choices.map((function(e){return(0,r.jsxs)("div",de({className:"relative mb-2 last:mb-0 flex"},{children:[(0,r.jsx)(l.Z,{className:"w-8 cursor-pointer mr-2 flex-none",onClick:i.bind(null,e.id)}),(0,r.jsx)(se,{content:e.content,onEditingDone:function(r){!function(e,r){t(A.updateOne({id:n.id,changes:{choices:(0,Z.ZP)(n.choices,(function(t){for(var n=0,i=t;n<i.length;n++){var o=i[n];o.id===r&&(o.content=e)}}))}}))}(r,e.id)},className:"w-full"}),(0,r.jsx)(L.HH,{type:"source",id:e.id,position:V.P.Right,style:{top:"50%",right:0,background:"#555",transform:"translateY(-50%)"}})]}),e.id)})),(0,r.jsx)(d.Z,{className:"w-8 cursor-pointer",onClick:function(){t(A.updateOne({id:n.id,changes:{choices:fe(fe([],n.choices,!0),[{id:(0,a.generate)(),content:""}],!1)}}))}})]}))]}))]}))]})};const he=(0,R.memo)(pe);var ve=function(){return ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ve.apply(this,arguments)},ye=function(e){var t=H(),n=e.data;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.HH,{type:"target",position:V.P.Left}),(0,r.jsxs)(le,ve({},e,{children:[(0,r.jsx)(ae,ve({},n)),(0,r.jsx)("div",{children:(0,r.jsx)(se,{content:n.content,onEditingDone:function(e){t(A.updateOne({id:n.id,changes:{content:e}}))}})})]})),(0,r.jsx)(L.HH,{type:"source",id:"0",position:V.P.Right})]})};const xe=(0,R.memo)(ye);var ge=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},me=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},be={flowViewPort:{x:0,y:0,zoom:1}},je=(0,f.oM)({name:"ui",initialState:be,reducers:{setFlowViewPort:function(e,t){e.flowViewPort=t.payload}}}),we=je.reducer,Oe=je.actions,Ne=function(e){return e.ui.flowViewPort},Ce=new Y("ui",be);v({actionCreator:Oe.setFlowViewPort,effect:function(e,t){var n=e.payload;return ge(void 0,void 0,void 0,(function(){return me(this,(function(e){return n&&Ce.set({flowViewPort:n}),[2]}))}))}}),v({actionCreator:p.appLoad,effect:function(e,t){return ge(void 0,void 0,void 0,(function(){return me(this,(function(e){return t.dispatch(Oe.setFlowViewPort(Ce.get().flowViewPort)),[2]}))}))}});var ke,Ie,Pe,Se=n(4057);!function(e){e.MCQuestionNode="MCQuestionNode",e.TextInputQuestionNode="TextInputQuestionNode"}(Pe||(Pe={}));var Qe=((ke={})[w.MCQuestion]=[Pe.MCQuestionNode],ke[w.TextInputQuestion]=[Pe.TextInputQuestionNode],ke),Te=((Ie={})[Pe.MCQuestionNode]=he,Ie[Pe.TextInputQuestionNode]=xe,Ie),Me=n(1945),Ee=n(6814),Ae=n(452),_e=n(1044),qe=n(4565),He=n(2675),Fe=function(){return Fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Fe.apply(this,arguments)};const Ze=function(e){var t=e.icon,n=function(){var e=(0,Se.u)(),t=e.x,n=e.y,r=H();return{add:function(e){var i=window.innerWidth/2+100*Math.random()-t,o=window.innerHeight/2+100*Math.random()-n;switch(e){case w.MCQuestion:r(A.addOne({type:w.MCQuestion,content:"",choices:[],id:(0,He.Z)(),flowData:{x:i,y:o}}));break;case w.TextInputQuestion:r(A.addOne({type:w.TextInputQuestion,content:"",id:(0,He.Z)(),flowData:{x:i,y:o}}))}}}}().add;return(0,r.jsxs)(_e.v,Fe({as:"div",className:"relative inline-block text-left"},{children:[(0,r.jsx)(_e.v.Button,{children:t}),(0,r.jsx)(qe.u,Fe({as:R.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},{children:(0,r.jsxs)(_e.v.Items,Fe({className:"absolute left-12 -top-4 w-56 mt-2 bg-white divide-y divide-gray-100 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{children:[(0,r.jsx)("div",Fe({className:"px-1 py-1 "},{children:(0,r.jsx)(_e.v.Item,{children:function(e){var t=e.active;return(0,r.jsx)("button",Fe({className:"".concat(t?"bg-primary-main text-white":"text-gray-900"," group flex rounded-md items-center w-full px-2 py-2 text-sm"),onClick:n.bind(null,w.TextInputQuestion)},{children:"Text Input Question"}))}})})),(0,r.jsx)("div",Fe({className:"px-1 py-1 "},{children:(0,r.jsx)(_e.v.Item,{children:function(e){var t=e.active;return(0,r.jsx)("button",Fe({className:"".concat(t?"bg-primary-main text-white":"text-gray-900"," group flex rounded-md items-center w-full px-2 py-2 text-sm"),onClick:n.bind(null,w.MCQuestion)},{children:"Multiple Choice Question"}))}})}))]}))}))]}))};var Re=function(){return Re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Re.apply(this,arguments)},Le=function(e){var t=e.children;return(0,r.jsx)("div",Re({className:"cursor-pointer mb-2 last:mb-0 pb-2 border-b-[1px] border-b-gray-200"},{children:t}))};const Ve=function(){var e=F(E.selectAll);return(0,r.jsxs)("div",Re({className:"bg-slate-200 w-[50px] absolute top-5 left-5 z-[10000] p-2 rounded-lg text-gray-800"},{children:[(0,r.jsx)(Ze,{icon:(0,r.jsx)(Le,{children:(0,r.jsx)(Me.Z,{className:"w-full"})})}),(0,r.jsx)(Le,{children:(0,r.jsx)(Ee.Z,{onClick:function(){var t,n;t=e,(n=document.createElement("a")).setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t))),n.setAttribute("download","questions"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}})}),(0,r.jsx)(Le,{children:(0,r.jsx)(U.rU,Re({to:"form"},{children:(0,r.jsx)(Ae.Z,{})}))})]}))};function Be(e){var t=[];return e.forEach((function(n){switch(n.type){case w.MCQuestion:n.choices.forEach((function(r){if(r.child&&e.find((function(e){return e.id===r.child}))){var i="".concat(n.id,"-&&-").concat(r.id,"-&&-").concat(r.child);t.push({id:i,source:n.id,target:r.child,sourceHandle:r.id,style:{strokeWidth:"5px"}})}}));break;case w.TextInputQuestion:if(!n.child)return;if(!e.find((function(e){return e.id===n.child})))return;t.push({id:"".concat(n.id,"-&&-").concat(0,"-&&-").concat(n.child),source:n.id,target:n.child,style:{strokeWidth:"5px"}})}})),t}function De(e){return e.map((function(e){var t,n;return{id:e.id,data:e,position:{x:(null===(t=e.flowData)||void 0===t?void 0:t.x)||10,y:(null===(n=e.flowData)||void 0===n?void 0:n.y)||10},type:Qe[e.type].toString()}}))}var Ue=function(){return Ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ue.apply(this,arguments)},We=function(){var e=H(),t=F(Ne),n=function(){var e=F(E.selectAll),t=F(E.selectEntities),n=(0,R.useState)(De(e)),r=n[0],i=n[1],o=(0,R.useState)(Be(e)),a=o[0],s=o[1],u=H();(0,R.useEffect)((function(){i(De(e)),s(Be(e))}),[e]);var l=(0,R.useCallback)((function(e){i((function(t){return(0,V.y)(e,t)}));var n=c(e.map((function(e){if("position"===e.type&&e.position)return{id:t[e.id].id,changes:{flowData:e.position}}}))),r=c(e.map((function(e){if("remove"===e.type)return e.id})));n.length>0&&u(A.updateMany(n)),r.length>0&&u(A.deleteMany(r))}),[t]),d=(0,R.useCallback)((function(e){s((function(t){return(0,V.x)(e,t)}));for(var n=c(e.map((function(e){if("remove"===e.type){var t=e.id.split("-&&-"),n=t[0],r=t[1];return{parent:n,child:t[2],choiceId:r}}}))),r=function(e){var n=e.parent,r=e.choiceId,i=t[n];switch(null==i?void 0:i.type){case w.MCQuestion:u(A.updateOne({id:i.id,changes:{choices:(0,Z.Uy)(i.choices,(function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];i.id===r&&(i.child=void 0)}}))}}));break;case w.TextInputQuestion:u(A.updateOne({id:i.id,changes:{child:void 0}}))}},i=0,o=n;i<o.length;i++)r(o[i])}),[t]),f=(0,R.useCallback)((function(e){var n=e.source,r=e.target,i=e.sourceHandle,o=t[n];if(o)switch(o.type){case w.MCQuestion:u(A.updateOne({id:o.id,changes:{choices:(0,Z.Uy)(o.choices,(function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];o.id===i&&(o.child=r)}}))}}));break;case w.TextInputQuestion:u(A.updateOne({id:o.id,changes:{child:r}}))}}),[t]);return{nodes:r,edges:a,onNodesChange:l,onEdgesChange:d,handleConnection:f}}(),i=n.edges,o=n.nodes,a=n.onEdgesChange,s=n.onNodesChange,u=n.handleConnection,l=(0,R.useState)(null),d=l[0],f=l[1],p=(0,Se.u)();return(0,R.useEffect)((function(){d&&d.setViewport(t)}),[d]),(0,R.useEffect)((function(){0!==p.x&&e(Oe.setFlowViewPort(p))}),[p]),(0,r.jsxs)("div",Ue({className:"bg-gray-900 h-full relative"},{children:[(0,r.jsx)(Ve,{}),(0,r.jsx)(L.ZP,{nodeTypes:Te,nodes:o,edges:i,onNodesChange:s,onEdgesChange:a,onConnect:u,minZoom:Number.NEGATIVE_INFINITY,onInit:f})]}))};const Je=function(){return(0,r.jsx)(L.tV,{children:(0,r.jsx)(We,{})})};var Ge,ze=(Ge=function(e,t){return Ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ge(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ge(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ye=function(){function e(e){this.question=e}return e.prototype.setQuestion=function(e){this.question=e},e}(),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.render=function(){return(0,r.jsx)("div",{children:(0,r.jsx)("div",{children:"No details to show for this type of question"})})},t}(Ye),Xe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$e=function(){return $e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},$e.apply(this,arguments)},et=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function tt(e){var t=e.question,n=H();function i(e){n(A.updateOne({id:t.id,changes:{choices:(0,Z.ZP)(t.choices,(function(t){var n=t.find((function(t){return t.id===e}));n&&(n.suggestions=et(et([],n.suggestions||[],!0),[{id:(0,a.generate)(),content:""}],!1))}))}}))}function o(e){var r=e.choiceId,i=e.suggestionId;return function(e){n(A.updateOne({id:t.id,changes:{choices:(0,Z.ZP)(t.choices,(function(t){var n;(null===(n=t.find((function(e){return e.id===r})).suggestions)||void 0===n?void 0:n.find((function(e){return e.id===i}))).content=e.target.value}))}}))}}function c(e){var r=e.choiceId,i=e.suggestionId;return function(){n(A.updateOne({id:t.id,changes:{choices:(0,Z.ZP)(t.choices,(function(e){var t,n=e.find((function(e){return e.id===r}));n.suggestions=null===(t=n.suggestions)||void 0===t?void 0:t.filter((function(e){return e.id!==i}))}))}}))}}return(0,r.jsx)("div",{children:t.choices.map((function(e){var a,s=e.suggestions||[];return(0,r.jsxs)("div",$e({className:"mb-10 last:mb-0"},{children:[(0,r.jsxs)("div",$e({className:"flex items-center"},{children:[(0,r.jsx)("div",$e({className:" flex-auto p-2 border-[1px] border-gray-700"},{children:e.content})),(0,r.jsxs)("div",$e({className:"ml-10"},{children:[(0,r.jsx)("span",$e({className:"mr-2"},{children:"Point"})),(0,r.jsx)("input",{className:"bg-transparent p-2  border-[1px] border-gray-500 rounded-md",value:e.point,onChange:(a=e.id,function(e){var r=e.target.value;n(A.updateOne({id:t.id,changes:{choices:(0,Z.ZP)(t.choices,(function(e){e.find((function(e){return e.id===a})).point=r}))}}))}),type:"number",step:"0.1"})]}))]})),(0,r.jsxs)("div",$e({className:"ml-10 mt-4"},{children:[(0,r.jsx)("div",$e({className:"mb-2"},{children:s.map((function(t){return(0,r.jsxs)("div",$e({className:"flex items-start"},{children:[(0,r.jsx)("textarea",{value:t.content,className:"bg-transparent p-2 border-[1px] border-gray-500 rounded-md w-full mb-2 last:mb-0",rows:2,onChange:o({choiceId:e.id,suggestionId:t.id})},t.id),(0,r.jsx)(u,$e({className:"ml-2",onClick:c({choiceId:e.id,suggestionId:t.id})},{children:"-"}))]}))}))})),(0,r.jsx)(u,$e({className:"text-xs",onClick:i.bind(null,e.id)},{children:"Add Suggestion"}))]}))]}))}))})}var nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),t.prototype.render=function(){return(0,r.jsx)("div",{children:(0,r.jsx)(tt,{question:this.question})})},t}(Ye),rt=function(){return rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},rt.apply(this,arguments)};function it(e){var t=e.question,n=H();return(0,r.jsxs)("div",rt({className:"mt-2 flex justify-end items-baseline"},{children:[(0,r.jsx)("div",rt({className:"mr-2 font-bold"},{children:"Question Point"})),(0,r.jsx)("input",{type:"number",step:"0.1",className:"bg-transparent p-2  border-[1px] border-gray-500 rounded-md",value:t.point,onChange:function(e){var r=e.target.value;n(A.updateOne({id:t.id,changes:{point:r}}))}})]}))}const ot=function(){var e=(0,W.UO)().questionId,t=F((function(t){return E.selectById(t,e)}));if(!t)return null;var n=function(e){return e.type===w.MCQuestion?new nt(e):new Ke(e)}(t);return(0,r.jsx)("div",rt({className:"bg-slate-800 text-white min-h-screen py-10"},{children:(0,r.jsxs)("div",rt({className:"container mx-auto"},{children:[(0,r.jsxs)("div",rt({className:"mb-10"},{children:[(0,r.jsxs)("div",rt({className:"p-4 bg-slate-600 rounded-md"},{children:[(0,r.jsxs)("div",rt({className:"flex items-start"},{children:[(0,r.jsx)("div",rt({className:"text-xs font-extrabold px-4 py-2 bg-slate-700 text-white inline-block rounded-md mb-2"},{children:ie[null==t?void 0:t.type]})),(0,r.jsx)(U.rU,rt({to:"/",className:"ml-auto"},{children:(0,r.jsx)(u,rt({className:"text-sm mb-6"},{children:"Back to flow"}))}))]})),(0,r.jsx)("div",rt({className:"text-xl font-bold"},{children:t.content}))]})),(0,r.jsx)(it,{question:t})]})),n.render()]}))}))};var at=(0,f.HF)({sortComparer:function(e,t){return e.order-t.order}}),ct=(0,f.oM)({name:"formPageSlice",initialState:at.getInitialState(),reducers:{add:at.addOne,remove:at.removeOne,update:at.updateOne,set:at.setAll}}),st=ct.reducer,ut=ct.actions,lt=at.getSelectors((function(e){return e.entities.formPage})),dt=n(6980),ft=function(){return ft=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ft.apply(this,arguments)};function pt(e){return(0,r.jsxs)("svg",ft({viewBox:"0 0 24 24",fill:"none"},e,{children:[(0,r.jsx)("circle",{cx:12,cy:12,r:12,fill:"#fff",opacity:"0.2"}),(0,r.jsx)("path",{d:"M7 13l3 3 7-7",stroke:"#fff",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})]}))}const ht=function(e){var t=H(),n=F((function(t){return lt.selectById(t,e.id)})),i=void 0;return n.choiceId&&(i=e.choices.find((function(e){return e.id===n.choiceId}))),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",ft({className:"text-4xl font-bold mb-10"},{children:e.content})),(0,r.jsx)("div",ft({className:"w-full max-w-md mx-auto"},{children:(0,r.jsxs)(dt.E,ft({value:i,onChange:function(e){t(ut.update({id:n.id,changes:{choiceId:e.id}}))}},{children:[(0,r.jsx)(dt.E.Label,ft({className:"sr-only"},{children:"Server size"})),(0,r.jsx)("div",ft({className:"space-y-2"},{children:e.choices.map((function(e,t){return(0,r.jsx)(dt.E.Option,ft({value:e,className:function(e){var t=e.active,n=e.checked;return"".concat(t?"ring-2 ring-offset-2 ring-offset-sky-300 ring-white ring-opacity-60":"","\n                  ").concat(n?"bg-primary-main bg-opacity-75 text-white":"bg-white","\n                    relative rounded-lg shadow-md px-5 py-4 cursor-pointer flex focus:outline-none")}},{children:function(t){t.active;var n=t.checked;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",ft({className:"flex items-center justify-between w-full"},{children:[(0,r.jsx)("div",ft({className:"flex items-center"},{children:(0,r.jsx)("div",ft({className:"text-sm"},{children:(0,r.jsx)(dt.E.Label,ft({as:"p",className:"font-medium  ".concat(n?"text-white":"text-gray-900")},{children:e.content}))}))})),n&&(0,r.jsx)("div",ft({className:"flex-shrink-0 text-white"},{children:(0,r.jsx)(pt,{className:"w-6 h-6"})}))]}))})}}),t)}))}))]}))}))]})};var vt=function(){return vt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},vt.apply(this,arguments)};const yt=function(e){var t=e.question,n=t.id,i=t.content,o=e.formPage.inputValue,a=void 0===o?"":o,c=H();return console.log(a),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",vt({className:"text-4xl font-bold mb-10"},{children:i})),(0,r.jsx)("input",{type:"text",className:"p-3 border-[1px] border-gray-500 bg-transparent w-full rounded-md",value:a,onChange:function(e){c(ut.update({id:n,changes:{inputValue:e.target.value}}))}})]})};var xt=function(){return xt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},xt.apply(this,arguments)};const gt=function(){var e=H(),t=F(ne),n=(0,q.v9)(lt.selectAll),i=n[n.length-1],o=F((function(e){return E.selectById(e,null==i?void 0:i.id)}));if((0,R.useEffect)((function(){e(ut.set([{id:t,order:0}]))}),[t]),!o||!i)return null;var a=t===o.id;return(0,r.jsxs)("div",xt({className:"min-h-screen bg-gray-300 flex items-center justify-center"},{children:[(0,r.jsxs)("div",xt({className:"w-2/3 max-w-4xl"},{children:[(0,r.jsx)("div",xt({className:"text-center"},{children:function(){if(!o)return null;switch(o.type){case w.MCQuestion:return(0,r.jsx)(ht,xt({},o));case w.TextInputQuestion:return(0,r.jsx)(yt,{question:o,formPage:i});default:return null}}()})),(0,r.jsxs)("div",xt({className:"flex mt-20"},{children:[!a&&(0,r.jsx)(u,xt({className:"w-full mr-2",onClick:function(){o.id!==t&&e(ut.remove(o.id))}},{children:"Previous"})),(0,r.jsx)(u,xt({className:"w-full",onClick:function(){var t,r;switch(o.type){case w.MCQuestion:var a=i.choiceId;a&&(r=null===(t=o.choices.find((function(e){return e.id===a})))||void 0===t?void 0:t.child);break;case w.TextInputQuestion:r=o.child}r&&e(ut.add({id:r,order:n.length}))}},{children:"Next"}))]}))]})),(0,r.jsx)(U.rU,xt({to:"/",className:"fixed bottom-10 right-10 p-4 bg-slate-200 rounded-md"},{children:"Return to Flow"}))]}))};var mt=function(){return mt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},mt.apply(this,arguments)};var bt=n(7995),jt=n(10),wt=(0,f.xC)({reducer:{form:ee,entities:(0,jt.UY)({questions:M,formPage:st}),ui:we},middleware:function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([h.middleware],(0,f.Bx)(),!0)});window._store=wt;var Ot=function(){return Ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ot.apply(this,arguments)};bt.render((0,r.jsx)(U.UT,{children:(0,r.jsx)(q.zt,Ot({store:wt},{children:(0,r.jsx)((function(){var e=H();return(0,R.useEffect)((function(){e(p.appLoad())}),[]),(0,r.jsxs)(W.Z5,{children:[(0,r.jsx)(W.AW,{path:"/",element:(0,r.jsx)("div",mt({className:"h-screen w-screen bg-gray-800 text-white p-8"},{children:(0,r.jsx)(Je,{})}))}),(0,r.jsx)(W.AW,{path:"/form",element:(0,r.jsx)(gt,{})}),(0,r.jsx)(W.AW,{path:"details/:questionId",element:(0,r.jsx)(ot,{})})]})}),{})}))}),document.getElementById("root"))}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=(t,n,i,o)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,i,o]=e[l],c=!0,s=0;s<n.length;s++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(c=!1,o<a&&(a=o));if(c){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,i,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={296:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,c,s]=n,u=0;if(a.some((t=>0!==e[t]))){for(i in c)r.o(c,i)&&(r.m[i]=c[i]);if(s)var l=s(r)}for(t&&t(n);u<a.length;u++)o=a[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(l)},n=self.webpackChunk_survey_form_app=self.webpackChunk_survey_form_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=r.O(void 0,[843],(()=>r(8441)));i=r.O(i)})();